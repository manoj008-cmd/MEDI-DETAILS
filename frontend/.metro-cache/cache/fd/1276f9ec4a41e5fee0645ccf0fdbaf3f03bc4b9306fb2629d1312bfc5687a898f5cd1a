{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/hooks/useAuth.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuthState();\n    }, []);\n    const checkAuthState = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('user_data');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error checking auth state:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await fetch(`${API_URL}/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          setToken(data.token);\n          setUser(data.user);\n          await AsyncStorage.default.setItem('auth_token', data.token);\n          await AsyncStorage.default.setItem('user_data', JSON.stringify(data.user));\n          return true;\n        } else {\n          Alert.default.alert('Login Failed', data.detail || 'Invalid credentials');\n          return false;\n        }\n      } catch (error) {\n        console.error('Login error:', error);\n        Alert.default.alert('Error', 'Network error. Please try again.');\n        return false;\n      }\n    };\n    const register = async userData => {\n      try {\n        const response = await fetch(`${API_URL}/auth/register`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(userData)\n        });\n        const data = await response.json();\n        if (response.ok) {\n          setToken(data.token);\n          setUser(data.user);\n          await AsyncStorage.default.setItem('auth_token', data.token);\n          await AsyncStorage.default.setItem('user_data', JSON.stringify(data.user));\n          return true;\n        } else {\n          Alert.default.alert('Registration Failed', data.detail || 'Registration failed');\n          return false;\n        }\n      } catch (error) {\n        console.error('Registration error:', error);\n        Alert.default.alert('Error', 'Network error. Please try again.');\n        return false;\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('auth_token');\n        await AsyncStorage.default.removeItem('user_data');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    const value = {\n      user,\n      token,\n      login,\n      register,\n      logout,\n      loading\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":135,"map":[[13,2,27,0,"exports"],[13,9,27,0],[13,10,27,0,"AuthProvider"],[13,22,27,0],[13,25,27,0,"AuthProvider"],[13,37,27,0],[14,2,141,0,"exports"],[14,9,141,0],[14,10,141,0,"useAuth"],[14,17,141,0],[14,20,141,0,"useAuth"],[14,27,141,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,2,69],[18,6,2,69,"_reactNativeWebDistExportsAlert"],[18,37,2,69],[18,40,2,69,"require"],[18,47,2,69],[18,48,2,69,"_dependencyMap"],[18,62,2,69],[19,2,2,69],[19,6,2,69,"Alert"],[19,11,2,69],[19,14,2,69,"_interopDefault"],[19,29,2,69],[19,30,2,69,"_reactNativeWebDistExportsAlert"],[19,61,2,69],[20,2,2,69],[20,6,2,69,"_reactJsxDevRuntime"],[20,25,2,69],[20,28,2,69,"require"],[20,35,2,69],[20,36,2,69,"_dependencyMap"],[20,50,2,69],[21,2,23,0],[21,8,23,6,"AuthContext"],[21,19,23,17],[21,35,23,20],[21,39,23,20,"createContext"],[21,45,23,33],[21,46,23,33,"createContext"],[21,59,23,33],[21,61,23,63,"undefined"],[21,70,23,72],[21,71,23,73],[22,2,25,0],[22,8,25,6,"API_URL"],[22,15,25,13],[22,18,25,16,"process"],[22,25,25,23],[22,26,25,24,"env"],[22,29,25,27],[22,30,25,28,"EXPO_PUBLIC_BACKEND_URL"],[22,53,25,51],[22,56,25,54],[22,62,25,60],[23,2,27,7],[23,11,27,16,"AuthProvider"],[23,23,27,28,"AuthProvider"],[23,24,27,29],[24,4,27,31,"children"],[25,2,27,65],[25,3,27,66],[25,5,27,68],[26,4,28,2],[26,10,28,8],[26,11,28,9,"user"],[26,15,28,13],[26,17,28,15,"setUser"],[26,24,28,22],[26,25,28,23],[26,28,28,26],[26,32,28,26,"useState"],[26,38,28,34],[26,39,28,34,"useState"],[26,47,28,34],[26,49,28,48],[26,53,28,52],[26,54,28,53],[27,4,29,2],[27,10,29,8],[27,11,29,9,"token"],[27,16,29,14],[27,18,29,16,"setToken"],[27,26,29,24],[27,27,29,25],[27,30,29,28],[27,34,29,28,"useState"],[27,40,29,36],[27,41,29,36,"useState"],[27,49,29,36],[27,51,29,52],[27,55,29,56],[27,56,29,57],[28,4,30,2],[28,10,30,8],[28,11,30,9,"loading"],[28,18,30,16],[28,20,30,18,"setLoading"],[28,30,30,28],[28,31,30,29],[28,34,30,32],[28,38,30,32,"useState"],[28,44,30,40],[28,45,30,40,"useState"],[28,53,30,40],[28,55,30,41],[28,59,30,45],[28,60,30,46],[29,4,32,2],[29,8,32,2,"useEffect"],[29,14,32,11],[29,15,32,11,"useEffect"],[29,24,32,11],[29,26,32,12],[29,32,32,18],[30,6,33,4,"checkAuthState"],[30,20,33,18],[30,21,33,19],[30,22,33,20],[31,4,34,2],[31,5,34,3],[31,7,34,5],[31,9,34,7],[31,10,34,8],[32,4,36,2],[32,10,36,8,"checkAuthState"],[32,24,36,22],[32,27,36,25],[32,33,36,25,"checkAuthState"],[32,34,36,25],[32,39,36,37],[33,6,37,4],[33,10,37,8],[34,8,38,6],[34,14,38,12,"storedToken"],[34,25,38,23],[34,28,38,26],[34,34,38,32,"AsyncStorage"],[34,46,38,44],[34,47,38,44,"default"],[34,54,38,44],[34,55,38,45,"getItem"],[34,62,38,52],[34,63,38,53],[34,75,38,65],[34,76,38,66],[35,8,39,6],[35,14,39,12,"storedUser"],[35,24,39,22],[35,27,39,25],[35,33,39,31,"AsyncStorage"],[35,45,39,43],[35,46,39,43,"default"],[35,53,39,43],[35,54,39,44,"getItem"],[35,61,39,51],[35,62,39,52],[35,73,39,63],[35,74,39,64],[36,8,41,6],[36,12,41,10,"storedToken"],[36,23,41,21],[36,27,41,25,"storedUser"],[36,37,41,35],[36,39,41,37],[37,10,42,8,"setToken"],[37,18,42,16],[37,19,42,17,"storedToken"],[37,30,42,28],[37,31,42,29],[38,10,43,8,"setUser"],[38,17,43,15],[38,18,43,16,"JSON"],[38,22,43,20],[38,23,43,21,"parse"],[38,28,43,26],[38,29,43,27,"storedUser"],[38,39,43,37],[38,40,43,38],[38,41,43,39],[39,8,44,6],[40,6,45,4],[40,7,45,5],[40,8,45,6],[40,15,45,13,"error"],[40,20,45,18],[40,22,45,20],[41,8,46,6,"console"],[41,15,46,13],[41,16,46,14,"error"],[41,21,46,19],[41,22,46,20],[41,50,46,48],[41,52,46,50,"error"],[41,57,46,55],[41,58,46,56],[42,6,47,4],[42,7,47,5],[42,16,47,14],[43,8,48,6,"setLoading"],[43,18,48,16],[43,19,48,17],[43,24,48,22],[43,25,48,23],[44,6,49,4],[45,4,50,2],[45,5,50,3],[46,4,52,2],[46,10,52,8,"login"],[46,15,52,13],[46,18,52,16],[46,24,52,16,"login"],[46,25,52,23,"email"],[46,30,52,36],[46,32,52,38,"password"],[46,40,52,54],[46,45,52,77],[47,6,53,4],[47,10,53,8],[48,8,54,6],[48,14,54,12,"response"],[48,22,54,20],[48,25,54,23],[48,31,54,29,"fetch"],[48,36,54,34],[48,37,54,35],[48,40,54,38,"API_URL"],[48,47,54,45],[48,60,54,58],[48,62,54,60],[49,10,55,8,"method"],[49,16,55,14],[49,18,55,16],[49,24,55,22],[50,10,56,8,"headers"],[50,17,56,15],[50,19,56,17],[51,12,57,10],[51,26,57,24],[51,28,57,26],[52,10,58,8],[52,11,58,9],[53,10,59,8,"body"],[53,14,59,12],[53,16,59,14,"JSON"],[53,20,59,18],[53,21,59,19,"stringify"],[53,30,59,28],[53,31,59,29],[54,12,59,31,"email"],[54,17,59,36],[55,12,59,38,"password"],[56,10,59,47],[56,11,59,48],[57,8,60,6],[57,9,60,7],[57,10,60,8],[58,8,62,6],[58,14,62,12,"data"],[58,18,62,16],[58,21,62,19],[58,27,62,25,"response"],[58,35,62,33],[58,36,62,34,"json"],[58,40,62,38],[58,41,62,39],[58,42,62,40],[59,8,64,6],[59,12,64,10,"response"],[59,20,64,18],[59,21,64,19,"ok"],[59,23,64,21],[59,25,64,23],[60,10,65,8,"setToken"],[60,18,65,16],[60,19,65,17,"data"],[60,23,65,21],[60,24,65,22,"token"],[60,29,65,27],[60,30,65,28],[61,10,66,8,"setUser"],[61,17,66,15],[61,18,66,16,"data"],[61,22,66,20],[61,23,66,21,"user"],[61,27,66,25],[61,28,66,26],[62,10,68,8],[62,16,68,14,"AsyncStorage"],[62,28,68,26],[62,29,68,26,"default"],[62,36,68,26],[62,37,68,27,"setItem"],[62,44,68,34],[62,45,68,35],[62,57,68,47],[62,59,68,49,"data"],[62,63,68,53],[62,64,68,54,"token"],[62,69,68,59],[62,70,68,60],[63,10,69,8],[63,16,69,14,"AsyncStorage"],[63,28,69,26],[63,29,69,26,"default"],[63,36,69,26],[63,37,69,27,"setItem"],[63,44,69,34],[63,45,69,35],[63,56,69,46],[63,58,69,48,"JSON"],[63,62,69,52],[63,63,69,53,"stringify"],[63,72,69,62],[63,73,69,63,"data"],[63,77,69,67],[63,78,69,68,"user"],[63,82,69,72],[63,83,69,73],[63,84,69,74],[64,10,71,8],[64,17,71,15],[64,21,71,19],[65,8,72,6],[65,9,72,7],[65,15,72,13],[66,10,73,8,"Alert"],[66,15,73,13],[66,16,73,13,"default"],[66,23,73,13],[66,24,73,14,"alert"],[66,29,73,19],[66,30,73,20],[66,44,73,34],[66,46,73,36,"data"],[66,50,73,40],[66,51,73,41,"detail"],[66,57,73,47],[66,61,73,51],[66,82,73,72],[66,83,73,73],[67,10,74,8],[67,17,74,15],[67,22,74,20],[68,8,75,6],[69,6,76,4],[69,7,76,5],[69,8,76,6],[69,15,76,13,"error"],[69,20,76,18],[69,22,76,20],[70,8,77,6,"console"],[70,15,77,13],[70,16,77,14,"error"],[70,21,77,19],[70,22,77,20],[70,36,77,34],[70,38,77,36,"error"],[70,43,77,41],[70,44,77,42],[71,8,78,6,"Alert"],[71,13,78,11],[71,14,78,11,"default"],[71,21,78,11],[71,22,78,12,"alert"],[71,27,78,17],[71,28,78,18],[71,35,78,25],[71,37,78,27],[71,71,78,61],[71,72,78,62],[72,8,79,6],[72,15,79,13],[72,20,79,18],[73,6,80,4],[74,4,81,2],[74,5,81,3],[75,4,83,2],[75,10,83,8,"register"],[75,18,83,16],[75,21,83,19],[75,27,83,26,"userData"],[75,35,83,39],[75,39,83,62],[76,6,84,4],[76,10,84,8],[77,8,85,6],[77,14,85,12,"response"],[77,22,85,20],[77,25,85,23],[77,31,85,29,"fetch"],[77,36,85,34],[77,37,85,35],[77,40,85,38,"API_URL"],[77,47,85,45],[77,63,85,61],[77,65,85,63],[78,10,86,8,"method"],[78,16,86,14],[78,18,86,16],[78,24,86,22],[79,10,87,8,"headers"],[79,17,87,15],[79,19,87,17],[80,12,88,10],[80,26,88,24],[80,28,88,26],[81,10,89,8],[81,11,89,9],[82,10,90,8,"body"],[82,14,90,12],[82,16,90,14,"JSON"],[82,20,90,18],[82,21,90,19,"stringify"],[82,30,90,28],[82,31,90,29,"userData"],[82,39,90,37],[83,8,91,6],[83,9,91,7],[83,10,91,8],[84,8,93,6],[84,14,93,12,"data"],[84,18,93,16],[84,21,93,19],[84,27,93,25,"response"],[84,35,93,33],[84,36,93,34,"json"],[84,40,93,38],[84,41,93,39],[84,42,93,40],[85,8,95,6],[85,12,95,10,"response"],[85,20,95,18],[85,21,95,19,"ok"],[85,23,95,21],[85,25,95,23],[86,10,96,8,"setToken"],[86,18,96,16],[86,19,96,17,"data"],[86,23,96,21],[86,24,96,22,"token"],[86,29,96,27],[86,30,96,28],[87,10,97,8,"setUser"],[87,17,97,15],[87,18,97,16,"data"],[87,22,97,20],[87,23,97,21,"user"],[87,27,97,25],[87,28,97,26],[88,10,99,8],[88,16,99,14,"AsyncStorage"],[88,28,99,26],[88,29,99,26,"default"],[88,36,99,26],[88,37,99,27,"setItem"],[88,44,99,34],[88,45,99,35],[88,57,99,47],[88,59,99,49,"data"],[88,63,99,53],[88,64,99,54,"token"],[88,69,99,59],[88,70,99,60],[89,10,100,8],[89,16,100,14,"AsyncStorage"],[89,28,100,26],[89,29,100,26,"default"],[89,36,100,26],[89,37,100,27,"setItem"],[89,44,100,34],[89,45,100,35],[89,56,100,46],[89,58,100,48,"JSON"],[89,62,100,52],[89,63,100,53,"stringify"],[89,72,100,62],[89,73,100,63,"data"],[89,77,100,67],[89,78,100,68,"user"],[89,82,100,72],[89,83,100,73],[89,84,100,74],[90,10,102,8],[90,17,102,15],[90,21,102,19],[91,8,103,6],[91,9,103,7],[91,15,103,13],[92,10,104,8,"Alert"],[92,15,104,13],[92,16,104,13,"default"],[92,23,104,13],[92,24,104,14,"alert"],[92,29,104,19],[92,30,104,20],[92,51,104,41],[92,53,104,43,"data"],[92,57,104,47],[92,58,104,48,"detail"],[92,64,104,54],[92,68,104,58],[92,89,104,79],[92,90,104,80],[93,10,105,8],[93,17,105,15],[93,22,105,20],[94,8,106,6],[95,6,107,4],[95,7,107,5],[95,8,107,6],[95,15,107,13,"error"],[95,20,107,18],[95,22,107,20],[96,8,108,6,"console"],[96,15,108,13],[96,16,108,14,"error"],[96,21,108,19],[96,22,108,20],[96,43,108,41],[96,45,108,43,"error"],[96,50,108,48],[96,51,108,49],[97,8,109,6,"Alert"],[97,13,109,11],[97,14,109,11,"default"],[97,21,109,11],[97,22,109,12,"alert"],[97,27,109,17],[97,28,109,18],[97,35,109,25],[97,37,109,27],[97,71,109,61],[97,72,109,62],[98,8,110,6],[98,15,110,13],[98,20,110,18],[99,6,111,4],[100,4,112,2],[100,5,112,3],[101,4,114,2],[101,10,114,8,"logout"],[101,16,114,14],[101,19,114,17],[101,25,114,17,"logout"],[101,26,114,17],[101,31,114,44],[102,6,115,4],[102,10,115,8],[103,8,116,6],[103,14,116,12,"AsyncStorage"],[103,26,116,24],[103,27,116,24,"default"],[103,34,116,24],[103,35,116,25,"removeItem"],[103,45,116,35],[103,46,116,36],[103,58,116,48],[103,59,116,49],[104,8,117,6],[104,14,117,12,"AsyncStorage"],[104,26,117,24],[104,27,117,24,"default"],[104,34,117,24],[104,35,117,25,"removeItem"],[104,45,117,35],[104,46,117,36],[104,57,117,47],[104,58,117,48],[105,8,118,6,"setToken"],[105,16,118,14],[105,17,118,15],[105,21,118,19],[105,22,118,20],[106,8,119,6,"setUser"],[106,15,119,13],[106,16,119,14],[106,20,119,18],[106,21,119,19],[107,6,120,4],[107,7,120,5],[107,8,120,6],[107,15,120,13,"error"],[107,20,120,18],[107,22,120,20],[108,8,121,6,"console"],[108,15,121,13],[108,16,121,14,"error"],[108,21,121,19],[108,22,121,20],[108,37,121,35],[108,39,121,37,"error"],[108,44,121,42],[108,45,121,43],[109,6,122,4],[110,4,123,2],[110,5,123,3],[111,4,125,2],[111,10,125,8,"value"],[111,15,125,13],[111,18,125,16],[112,6,126,4,"user"],[112,10,126,8],[113,6,127,4,"token"],[113,11,127,9],[114,6,128,4,"login"],[114,11,128,9],[115,6,129,4,"register"],[115,14,129,12],[116,6,130,4,"logout"],[116,12,130,10],[117,6,131,4,"loading"],[118,4,132,2],[118,5,132,3],[119,4,134,2],[119,24,135,4],[119,28,135,4,"_reactJsxDevRuntime"],[119,47,135,4],[119,48,135,4,"jsxDEV"],[119,54,135,4],[119,56,135,5,"AuthContext"],[119,67,135,16],[119,68,135,17,"Provider"],[119,76,135,25],[120,6,135,26,"value"],[120,11,135,31],[120,13,135,33,"value"],[120,18,135,39],[121,6,135,39,"children"],[121,14,135,39],[121,16,136,7,"children"],[122,4,136,15],[123,6,136,15,"fileName"],[123,14,136,15],[123,16,136,15,"_jsxFileName"],[123,28,136,15],[124,6,136,15,"lineNumber"],[124,16,136,15],[125,6,136,15,"columnNumber"],[125,18,136,15],[126,4,136,15],[126,11,137,26],[126,12,137,27],[127,2,139,0],[128,2,141,7],[128,11,141,16,"useAuth"],[128,18,141,23,"useAuth"],[128,19,141,23],[128,21,141,26],[129,4,142,2],[129,10,142,8,"context"],[129,17,142,15],[129,20,142,18],[129,24,142,18,"useContext"],[129,30,142,28],[129,31,142,28,"useContext"],[129,41,142,28],[129,43,142,29,"AuthContext"],[129,54,142,40],[129,55,142,41],[130,4,143,2],[130,8,143,6,"context"],[130,15,143,13],[130,20,143,18,"undefined"],[130,29,143,27],[130,31,143,29],[131,6,144,4],[131,12,144,10],[131,16,144,14,"Error"],[131,21,144,19],[131,22,144,20],[131,67,144,65],[131,68,144,66],[132,4,145,2],[133,4,146,2],[133,11,146,9,"context"],[133,18,146,16],[134,2,147,0],[135,0,147,1],[135,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthState","login","register","logout","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;yBEE;GFc;gBGE;GH6B;mBIE;GJ6B;iBKE;GLS;CDgB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}